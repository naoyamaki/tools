以下状況のサイトが多く、また、検証環境ではSGでアクセス制限を行なっている。

- EC2インスタンス上でサイトを運営している
- Let’s Encryptの証明書を利用している

運用にて証明書更新時に

1. SGのインバウンド設定を変更（外部からもhttpアクセスできるよう変更）
2. EC2にsshログインして証明書更新コマンドを実行
3. SGのインバウンド設定を変更（1の設定を削除）

と運用するサイト数/3か月で機械的業務が出てくる。

2のコマンドの前後でSGを変更するコマンドを書くのも手だが、EC2にあまり役割は持たせたくない
＆
そのシェルスクリプトがサイトの数だけ作られるのは冗長だと考え以下処理を考えた。

EventBridgeで（いったん）毎週水曜日10:00のトリガー作成
上記トリガーにてlambda関数呼び出し以下処理を実行

〜〜サイトごとのループ処理〜〜
サイト1のEC2インスタンスのSGインバウンド設定を変更
lambdaからサイト1にアクセスして証明書の期限を確認する
  期限が30日以内なら後続処理実行
  else lambda終了
lambdaからrun commandを利用して証明書更新コマンドを実行する
lambdaからサイト1にアクセスして証明書の期限を確認し、チャットツールへ通知する
サイト1のEC2インスタンスのSGインバウンド設定を変更
〜〜〜〜